<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>AitechNodeMysql</title>
    <link rel="stylesheet" href="generate-user.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">

  </head>
  <body>
    <form action="#" method="POST">
          <!-- <div class="icon">
            <i class="fas fa-user-circle"></i>
          </div> -->
          <div class="formcontainer">
          <div class="container">
            <label for="pin"><strong>User Pin</strong></label><br>
            <input type="text" placeholder="Enter User Pin" name="name" id="pin" required>
            <span id="details"></span>
          </div>
          <button id="btn" type="submit"><strong>Enter</strong></button>
          </div>
  </form>
  <script>
  document.getElementById("btn").addEventListener("click", function(event){
    event.preventDefault();
    fetch('http://localhost:5000/pin', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
          pin: document.getElementById('pin').value,
      })
    })
    .then(res => {
      return res.json()
    })
    .then(function(data) {
      // Here you get the data to modify as you please

      console.log(data[0]);
      var ul = document.getElementById("details");

     for( var i = 0; i < data.length; i++ )
     {
        var o = data[i];
        var li = document.createElement("li");
        li.appendChild(document.createTextNode(o.name));
        ul.appendChild(li);

        var li = document.createElement("li");
        li.appendChild(document.createTextNode(o.email));
        ul.appendChild(li);

        var li = document.createElement("li");
        li.appendChild(document.createTextNode(o.phone));
        ul.appendChild(li);
     }
    })
    .catch(function(error) {
      // If there is any error you will catch them here
    });
  });

  </script>
  </body>
</html>
